<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>detail-t70</title>
    <!-- Styles seront charg√©s par l'app principale -->
</head>
<body>
<div id="detail-t70" class="page">
            <div class="summary-container" style="max-width: 98%; padding: 20px;">
                <div style="display: flex; align-items: center; margin-bottom: 20px;">
                    <button onclick="switchPage('summary')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-right: 15px;">‚Üê Retour</button>
                    <h2 style="margin: 0; color: #333; flex: 1;">√âTABLIR LES BESOINS EN √âCHAFAUD</h2>
                    <button onclick="syncEquipementFromIw37n()" style="padding: 10px 20px; background: #48bb78; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-right: 10px;">
                        üîÑ Synchroniser avec IW37N
                    </button>
                    <button onclick="addEquipementLevage()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                        ‚ûï Ajouter √âquipement
                    </button>
                </div>

                <!-- Section Tableau des √âquipements -->
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <h3 style="margin: 0 0 5px 0; color: #333;">üìã Liste des √âquipements de Levage</h3>
                            <p style="margin: 0; color: #666; font-size: 0.95em;">
                                Total: <strong><span id="equipementLevageCount">0</span></strong> √©quipement(s) |
                                √âchafaudages: <strong><span id="echafaudageCount">0</span></strong> |
                                R√©currents: <strong><span id="recurrentCount">0</span></strong>
                            </p>
                            <div style="margin-top: 10px;">
                                <label style="font-size: 0.9em; color: #666; margin-right: 10px;">Filtrer:</label>
                                <select id="filterRecurrent" onchange="filterEquipementLevage()" style="padding: 5px 10px; border: 1px solid #ccc; border-radius: 6px;">
                                    <option value="">Tous</option>
                                    <option value="recurrent">R√©currents uniquement</option>
                                    <option value="non-recurrent">Non-r√©currents uniquement</option>
                                </select>
                            </div>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="exportEquipementLevageToExcel()" style="padding: 10px 20px; background: #4299e1; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                üì• Exporter Excel
                            </button>
                            <button onclick="exportEquipementLevageToPowerPoint()" style="padding: 10px 20px; background: #dc3545; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                                üìÑ Exporter PDF
                            </button>
                        </div>
                    </div>
                    <div style="overflow-x: auto; max-height: 500px; overflow-y: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead style="position: sticky; top: 0; z-index: 10;">
                                <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: left; min-width: 100px;">Ordre</th>
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center; min-width: 80px;">Op√©</th>
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: left; min-width: 300px;">D√©sign. op√©r.</th>
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center; min-width: 100px;">R√©current</th>
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: left; min-width: 200px;">Commentaire</th>
                                    <th style="padding: 12px; border: 1px solid #dee2e6; text-align: center; min-width: 180px;">Photo ou Documents</th>
                                </tr>
                            </thead>
                            <tbody id="equipementLevageTableBody">
                                <tr>
                                    <td colspan="6" style="padding: 30px; text-align: center; color: #666;">
                                        Aucun √©quipement de levage enregistr√©. Cliquez sur "Ajouter √âquipement" pour commencer.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Section Fichiers -->
                <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0; color: #333;">üìé Documents et Fichiers</h3>
                        <button onclick="document.getElementById('equipementLevageFileInput').click()" style="padding: 10px 20px; background: #4299e1; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                            üì§ Ajouter un Fichier
                        </button>
                        <input type="file" id="equipementLevageFileInput" style="display: none;" onchange="handleEquipementLevageFile(event)" multiple>
                    </div>
                    <div id="equipementLevageFilesList" style="display: grid; gap: 10px;">
                        <div style="padding: 20px; text-align: center; color: #666; border: 2px dashed #ddd; border-radius: 8px;">
                            Aucun fichier ajout√©. Cliquez sur "Ajouter un Fichier" pour t√©l√©verser des documents.
                        </div>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
