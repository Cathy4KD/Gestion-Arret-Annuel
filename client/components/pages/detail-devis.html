<div id="detail-devis" class="page">
    <div class="card">
        <div style="display: flex; align-items: center; margin-bottom: 20px; gap: 15px;">
            <button onclick="window.switchToPage('summary')" class="btn" style="background: linear-gradient(145deg, #667eea, #764ba2); color: white; padding: 10px 20px;">
                ‚Üê Retour
            </button>
            <h2 style="margin: 0; color: #333;">DEVIS ET CORRECTIONS</h2>
        </div>

        <!-- Filtres -->
        <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                <!-- Filtre par Entrepreneur -->
                <div>
                    <button onclick="window.devisManager.toggleEntrepreneurDropdown()" class="btn" style="background: linear-gradient(145deg, #ff6b6b, #ee5a6f); color: white; padding: 10px 20px; width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;">
                        <span id="devis-entrepreneur-selected-text">Filtrer par Entrepreneur</span>
                        <span>‚ñº</span>
                    </button>
                    <div id="devis-entrepreneur-dropdown" style="display: none; background: white; border: 2px solid #ddd; border-radius: 8px; padding: 15px; margin-top: 10px; max-height: 300px; overflow-y: auto;">
                        <div style="display: flex; gap: 10px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid #eee;">
                            <button onclick="window.devisManager.selectAllEntrepreneurs()" class="btn" style="background: #4a7c59; color: white; padding: 8px 16px; flex: 1;">
                                Tout s√©lectionner
                            </button>
                            <button onclick="window.devisManager.deselectAllEntrepreneurs()" class="btn" style="background: #dc3545; color: white; padding: 8px 16px; flex: 1;">
                                Tout d√©s√©lectionner
                            </button>
                        </div>
                        <div style="margin-bottom: 10px; padding: 10px; background: #e3f2fd; border-radius: 5px;">
                            <span id="devis-entrepreneur-count" style="font-weight: 600; color: #1976d2;">0 / 0 s√©lectionn√©s</span>
                        </div>
                        <div id="devis-entrepreneur-filters"></div>
                    </div>
                </div>

                <!-- Filtre par Poste Technique -->
                <div>
                    <button onclick="window.dataActions.togglePosteDropdown('devis')" class="btn" style="background: linear-gradient(145deg, #667eea, #764ba2); color: white; padding: 10px 20px; width: 100%; text-align: left; display: flex; justify-content: space-between; align-items: center;">
                        <span id="devis-selected-text">Filtrer par Poste Technique</span>
                        <span>‚ñº</span>
                    </button>
                    <div id="devis-dropdown-menu" style="display: none; background: white; border: 2px solid #ddd; border-radius: 8px; padding: 15px; margin-top: 10px; max-height: 300px; overflow-y: auto;">
                        <div style="display: flex; gap: 10px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid #eee;">
                            <button onclick="window.dataActions.selectAllPostesTechniques('devis')" class="btn" style="background: #4a7c59; color: white; padding: 8px 16px; flex: 1;">
                                Tout s√©lectionner
                            </button>
                            <button onclick="window.dataActions.deselectAllPostesTechniques('devis')" class="btn" style="background: #dc3545; color: white; padding: 8px 16px; flex: 1;">
                                Tout d√©s√©lectionner
                            </button>
                        </div>
                        <div style="margin-bottom: 10px; padding: 10px; background: #e3f2fd; border-radius: 5px;">
                            <span id="devis-filter-count" style="font-weight: 600; color: #1976d2;">0 / 0 s√©lectionn√©s</span>
                        </div>
                        <div id="devis-poste-filters"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Saisie par Entrepreneur -->
        <div style="background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h3 style="margin: 0 0 5px 0; color: #333;">Saisie des Donn√©es par Entrepreneur</h3>
                    <p style="margin: 0; color: #666; font-size: 14px;">Entrez les informations sp√©cifiques pour chaque entrepreneur (dessins, travaux, dates cl√©s)</p>
                </div>
                <button onclick="window.devisManager.showEntrepreneursDataList()" class="btn" style="background: linear-gradient(145deg, #ff6b6b, #ee5a6f); color: white; padding: 12px 24px; font-weight: 600; font-size: 16px;">
                    üìù Saisir les Donn√©es
                </button>
            </div>
        </div>

        <!-- Tableau des op√©rations -->
        <div style="background: white; padding: 20px; border-radius: 10px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3 style="margin: 0; color: #333;">Op√©rations (<span id="devis-count">0</span>)</h3>
                <div style="display: flex; gap: 10px;">
                    <button onclick="window.devisManager.creerDevis()" class="btn" style="background: linear-gradient(145deg, #667eea, #764ba2); color: white; padding: 10px 20px;">
                        ‚úèÔ∏è Cr√©er un Devis
                    </button>
                    <button onclick="window.dataActions.exportToExcel('devis', 'DEVIS ET CORRECTIONS')" class="btn" style="background: linear-gradient(145deg, #28a745, #20c997); color: white; padding: 10px 20px;">
                        üìä Exporter Excel
                    </button>
                </div>
            </div>

            <table id="devis-table" class="summary-table" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: linear-gradient(145deg, #667eea, #764ba2); color: white;">
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">√âtat</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Ordre</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">D√©signation</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Op√©ration</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Post. Trav.</th>
                        <th style="padding: 12px; text-align: left; border: 1px solid #dee2e6;">Poste Technique</th>
                    </tr>
                </thead>
                <tbody id="devis-tbody">
                    <tr><td colspan="6" style="padding: 30px; text-align: center; color: #666;">Aucune donn√©e IW37N disponible.</td></tr>
                </tbody>
            </table>
        </div>
    </div>
</div>