<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>detail-t72</title>
    <!-- Styles seront charg√©s par l'app principale -->
</head>
<body>
<div id="detail-t72" class="page">
            <div class="summary-container" style="max-width: 100%;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center;">
                        <button onclick="switchPage('summary')" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; margin-right: 15px;">‚Üê Retour</button>
                        <h2 style="margin: 0; color: #333;">√âTABLIR LE PROCESSUS DE SUIVI DE CO√õT</h2>
                    </div>
                    <button onclick="generateT72Report()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;">
                        üìä G√©n√©rer un Rapport
                    </button>
                </div>

                <!-- Alert Section pour rappel d'enregistrement -->
                <div style="background: #fff3cd; border-left: 5px solid #ffc107; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; align-items: center; gap: 15px;">
                    <div style="font-size: 2em;">‚ö†Ô∏è</div>
                    <div>
                        <strong style="color: #856404;">Important :</strong>
                        <span style="color: #856404;"> N'oubliez pas d'enregistrer le Budget Total dans les Param√®tres de l'Arr√™t Annuel (‚öôÔ∏è) pour synchroniser avec le serveur.</span>
                    </div>
                </div>

                <!-- Budget Global Section - Vue d'ensemble -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); margin-bottom: 25px; color: white;">
                    <h3 style="margin: 0 0 20px 0; color: white; font-size: 1.4em; display: flex; align-items: center; gap: 10px;">
                        <span>üí∞</span> BILAN BUDG√âTAIRE GLOBAL
                    </h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
                        <!-- Budget Total des Param√®tres -->
                        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 10px; border: 2px solid rgba(255, 255, 255, 0.3);">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 8px;">Budget Total Autoris√©</div>
                            <div style="font-size: 2.2em; font-weight: bold;" id="t72GlobalBudgetTotal">0 ‚Ç¨</div>
                            <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">(Param√®tres Arr√™t)</div>
                        </div>

                        <!-- Budget Pr√©visionnel T72 -->
                        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 10px; border: 2px solid rgba(255, 255, 255, 0.3);">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 8px;">Budget Pr√©visionnel</div>
                            <div style="font-size: 2.2em; font-weight: bold;" id="t72GlobalBudgetPrevu">0 ‚Ç¨</div>
                            <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">(Planifi√© T72)</div>
                        </div>

                        <!-- D√©penses R√©elles -->
                        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 10px; border: 2px solid rgba(255, 255, 255, 0.3);">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 8px;">D√©penses R√©elles</div>
                            <div style="font-size: 2.2em; font-weight: bold;" id="t72GlobalActualTotal">0 ‚Ç¨</div>
                            <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;" id="t72GlobalPercentage">0% utilis√©</div>
                        </div>

                        <!-- Solde Disponible -->
                        <div style="background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(10px); padding: 20px; border-radius: 10px; border: 2px solid rgba(255, 255, 255, 0.3);">
                            <div style="font-size: 0.9em; opacity: 0.9; margin-bottom: 8px;">Solde Disponible</div>
                            <div style="font-size: 2.2em; font-weight: bold;" id="t72GlobalRemaining">0 ‚Ç¨</div>
                            <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;" id="t72GlobalStatus">√Ä suivre</div>
                        </div>
                    </div>
                </div>

                <!-- Synth√®se par Cat√©gorie -->
                <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                    <h3 style="margin: 0 0 20px 0; color: #333; font-size: 1.3em;">üìä Synth√®se par Cat√©gorie</h3>
                    <div id="t72SummaryContainer" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- Summary cards will be rendered here -->
                    </div>
                </div>

                <!-- Section Budget et D√©penses -->
                <div style="display: grid; grid-template-columns: 400px 1fr; gap: 20px;">

                    <!-- Budget Pr√©visionnel -->
                    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); height: fit-content;">
                        <h3 style="margin-top: 0; color: #333; border-bottom: 3px solid #667eea; padding-bottom: 10px;">üíµ Budget Pr√©visionnel</h3>
                        <div style="display: grid; gap: 15px;">
                            <div>
                                <label style="font-weight: bold; display: block; margin-bottom: 5px; color: #555;">Externes (‚Ç¨):</label>
                                <input type="number" id="budgetExterne" class="budget-input" onchange="updateT72Budget()" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 1em;">
                            </div>
                            <div>
                                <label style="font-weight: bold; display: block; margin-bottom: 5px; color: #555;">Pi√®ces (‚Ç¨):</label>
                                <input type="number" id="budgetPieces" class="budget-input" onchange="updateT72Budget()" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 1em;">
                            </div>
                            <div>
                                <label style="font-weight: bold; display: block; margin-bottom: 5px; color: #555;">Main d'≈ìuvre (‚Ç¨):</label>
                                <input type="number" id="budgetMainDoeuvre" class="budget-input" onchange="updateT72Budget()" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 1em;">
                            </div>
                            <div style="background: #e8eaf6; padding: 15px; border-radius: 8px; margin-top: 10px; border-left: 4px solid #667eea;">
                                <div style="font-size: 0.9em; color: #555; margin-bottom: 5px;">TOTAL BUDGET PR√âVU</div>
                                <div style="font-weight: bold; font-size: 1.8em; color: #667eea;">
                                    <span id="budgetTotal">0.00</span> ‚Ç¨
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Co√ªts R√©els -->
                    <div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="margin: 0; color: #c5554a;">üíº Co√ªts R√©els - Externes</h4>
                                <button onclick="addT72Actual('externe')" class="add-cost-btn" style="padding: 8px 16px; background: #4a7c59; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">‚ûï Ajouter</button>
                            </div>
                            <div class="summary-table-wrapper" style="max-height: 200px; overflow-y: auto;"><table class="summary-table"><thead><tr><th>Description</th><th>Montant (‚Ç¨)</th><th>Action</th></tr></thead><tbody id="actualExterneTableBody"></tbody></table></div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="margin: 0; color: #c5554a;">üîß Co√ªts R√©els - Pi√®ces</h4>
                                <button onclick="addT72Actual('pieces')" class="add-cost-btn" style="padding: 8px 16px; background: #4a7c59; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">‚ûï Ajouter</button>
                            </div>
                            <div class="summary-table-wrapper" style="max-height: 200px; overflow-y: auto;"><table class="summary-table"><thead><tr><th>Description</th><th>Montant (‚Ç¨)</th><th>Action</th></tr></thead><tbody id="actualPiecesTableBody"></tbody></table></div>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="margin: 0; color: #c5554a;">üë∑ Co√ªts R√©els - Main d'≈ìuvre</h4>
                                <button onclick="addT72Actual('mainDoeuvre')" class="add-cost-btn" style="padding: 8px 16px; background: #4a7c59; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">‚ûï Ajouter</button>
                            </div>
                            <div class="summary-table-wrapper" style="max-height: 200px; overflow-y: auto;"><table class="summary-table"><thead><tr><th>Description</th><th>Montant (‚Ç¨)</th><th>Action</th></tr></thead><tbody id="actualMainDoeuvreTableBody"></tbody></table></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
